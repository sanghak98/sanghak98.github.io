---
title: "System Verilog"
date: "2025-08-04"
thumbnail: "/assets/img/thumbnail/sv.jpg"
---

# 이론
---
합성 후 setup time slack < 0 문제가 생긴다는 건, 데이터가 레지스터에 도착하기까지 시간이 너무 오래 걸려서 클럭 타이밍을 맞추지 못한다는 뜻이야. 즉, Setup Time Violation이 발생한 거지.
이걸 해결하려면 결국 슬랙(Slack)을 양수로 만들도록 회로를 개선해야 해.

✅ 1. 개념 정리

📌 Slack이란?

Slack = 클럭 주기 - (Data arrival time - Clock skew)

    Slack < 0 → Setup timing violation 발생
    Slack ≥ 0 → 타이밍 조건 충족 (met)

✅ 2. Slack (Setup Time Violation) 원인 요약

|원인|설명|
|---|---|
|논리 경로가 너무 길다|조합 로직이 깊어서 data arrival time이 길어짐|
|Fan-out이 많다|하나의 신호가 여러 로직을 구동해서 지연 발생|
|Gate 지연이 크다|Slow cell 사용, 복잡한 연산 등|
|Clock Skew가 크다|Clock 도달 시간이 레지스터마다 다름|
|Wire delay가 큼|배치 및 배선 단계에서 경로 길이가 너무 길어짐|
|Setup time 자체가 큼|플립플롭의 특성상 필요한 setup time이 큼|


✅ 3. Setup Slack을 줄이는 (혹은 메우는) 방법

① Critical Path 단축 (로직 최적화)
    
    조합 논리가 너무 길면 분해 (분기, 파이프라인) 
        Ex. ALU, Comparator 등
    불필요한 논리 제거 (logic optimization)
    shift, multiply 등의 무거운 연산은 미리 계산하거나 LUT로 대체

② 파이프라인 삽입

    가장 강력한 해결책 중 하나
    긴 조합 경로를 나눠서 레지스터 중간 삽입
    클럭 하나에 처리할 양을 줄이고, throughput을 올림

    📌 단점: latency 증가 (delay가 생김), FSM이 복잡해질 수 있음

③ High Drive Cell 사용

    지연이 큰 경로에 고속 셀, 고드라이브 셀을 배치
        Ex. INV_X1 대신 INV_X4 사용
    synthesis 시 constraint에 따라 도구가 자동 적용하기도 함

④ Gate Sizing (셀 크기 조정)

    driver의 드라이브 강도를 증가시켜 delay 감소
    너무 크면 전력, 면적 증가 → 균형이 중요

⑤ 경로 분할 (Re-structuring)

    복잡한 path를 여러 경로로 분기해서 병렬 처리
        Ex. 큰 decoder를 계층 구조로 분리

⑥ Clock Skew 최소화
    
    클럭이 도달하는 시점이 서로 다르면 유효 시간 감소

    CTS 단계에서 균일하게 clock 도달하게 설계

⑦ 다른 클럭 도메인 분리 / 클럭 속도 줄이기
    
    불가피하게 타이밍이 안 맞는다면:
        해당 블록만 클럭 나눠서 slower clock 사용
        CDC 처리 잘 해야 함

⑧ Physical Optimization (배치/배선)

    placement & routing 단계에서 경로를 짧게 하도록 제약 설정
    Net Delay 줄이기

✅ 4. Tool 상에서 하는 조치 (Synthesis/Vivado 기준)

    set_max_delay 제약 재조정
    compile_ultra, optimize_registers, retime 옵션 사용
    report_timing 분석 후 critical path 타겟팅

    Vivado라면:
    report_timing -sort_by group -max_paths 10
    
✅ 결론: 어떻게 slack 문제를 해결할까?

|방법|요약|
|---|---|
|조합 경로 줄이기|로직 단순화, 파이프라인, 병렬화|
|셀 크기 조절|고속 셀/고드라이브 셀로 변경|
|물리적 최적화|배치/배선 경로 단축, 레이아웃 조정|
|툴 옵션 활용|자동 retiming, compile_ultra|
|클럭 전략|clock skew 조절, slower clock 분리|